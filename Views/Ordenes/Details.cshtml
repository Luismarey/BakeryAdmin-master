@model BakeryAdmin.Models.PersonaBase
@{
    ViewData["Title"] = "Detalle de Persona";
}

<div class="container mt-4">

    <!-- Card principal -->
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h3 class="card-title mb-1">@Model.Nombres @Model.Apellidos</h3>
            <p class="text-muted">@Model.Correo_Electronico</p>

            <hr />

            <div class="row mb-3">
                <div class="col-md-6">
                    <strong>Tipo:</strong> <br /> @Model.TipoPersona
                </div>
                <div class="col-md-6">
                    <strong>Celular:</strong> <br /> @Model.NumCelular
                </div>
            </div>

            <div class="row mb-3">
                <div class="col-md-6">
                    <strong>C.I.:</strong> <br /> @Model.NumCi
                </div>
                <div class="col-md-6">
                    <strong>Fecha de Nacimiento:</strong> <br /> @(Model.Fecha_Nacimiento?.ToString("yyyy-MM-dd"))
                </div>
            </div>

           @if (Model is Empleado empleado) // Pattern Matching
            {
                <h5 class="mt-4">Datos Específicos del Empleado</h5>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>Profesión:</strong> <br /> @empleado.Profesion
                    </div>
                    <div class="col-md-6">
                        <strong>Movilidad:</strong> <br /> @(empleado.Mobilidad ? "Sí" : "No")
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <strong>Número de Licencia:</strong> <br /> @empleado.Numero_Licencia
                    </div>
                    <div class="col-md-6">
                        <strong>Categoría de Licencia:</strong> <br /> @empleado.Categoria_Licencia
                    </div>
                </div>
            }
            </div>
    </div>
    
    </div>

    <!-- Direcciones -->
    <h4 class="mb-3">Direcciones</h4>

    @if (Model.Direcciones != null && Model.Direcciones.Any())
    {
        <table class="table table-bordered table-striped shadow-sm">
            <thead class="table-light">
                <tr>
                    <th>Zona</th>
                    <th>Calle</th>
                    <th>Número</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var a in Model.Direcciones)
                {
                    <tr>
                        <td>@a.Zona</td>
                        <td>@a.Calle</td>
                        <td>@a.Numero</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-muted fst-italic">No tiene direcciones registradas.</p>
    }

    <!-- Botones de acción -->
    <div class="mt-4 d-flex gap-2">
        <a class="btn btn-outline-secondary" href="/Personas">
            <i class="fa-solid fa-arrow-left"></i> Volver
        </a>
        <a class="btn btn-primary" href="/Personas/Edit/@Model.PersonaId">
            <i class="fa-solid fa-pen-to-square"></i> Editar
        </a>
    </div>

</div>
